<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
  </head>
  <body style="padding:40px;">
    <% include ../partials/_header %>

    <a href="/todos/new" class="btn btn-primary">New Todo</a>
    <hr>

    <form action="/todos" method="GET">
      <label for="query">Search:</label>
      <input type="text" name="query" placeholder="Search for todo..." />
      <input type="submit" value="Go!" />
    </form>

    <table class="table table-bordered table-striped">
      <% for (todo of todos) { %>
        <tr>
          <td><%= todo.desc %></td>

          <td>
            <%= todo.completed ? 'Completed' : 'Incomplete' %>
          </td>

          <td><%= todo.priority %></td>

          <td style="display: flex">

            <form action="/todos/<%= todo._id %>/toggle?_method=PUT" method="POST">
              <button class="btn btn-default">Toggle</button>
            </form>

            <a href="/todos/<%= todo._id %>/edit" class="btn btn-default">Edit</a>

            <form action="/todos/<%= todo._id %>?_method=DELETE" method="POST">
              <button class="btn btn-default">Delete &#128465;</button>
            </form>

          </td>
        </tr>
      <% } %>
    </table>
  </body>
</html>
